<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Pulse Nepal</title>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <!--build:css css/style.css-->
  <link rel="stylesheet" href="css/style.css">
  <!--endbuild-->
</head>

<body>
  <header>
    <div class="container">
      <div class="row">
        <div class="logo">
          Pulse Nepal
        </div>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="row">
          <div class="highlight-layout stories">
              <div class="card-wrapper">
              </div>
          </div>
      </div>
      <div class="row">
        <div class="normal-layout stories">
          <h2><span>POPULAR</span></h2>
          <ul class="card-wrapper">
          </ul>
        </div>
        <div class="dense-layout stories">
          <h2><span>NEPAL'S STORIES</span></h2>
          <ul class="card-wrapper">
          </ul>
        </div>
      </div>
    </div>
  </main>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
    (function () {
      var pulseAPI = "https://api.pulsenepal.com/api/v1/pulses";
      $.getJSON(pulseAPI, {})
        .done(function (response) {
          if (response.status == "OK") {
            var pulses = response.data;
            
            if (pulses.hot.length > 0) {
              var pulse = pulses.hot[0];
              var div = '<div>'+
                      '<a href=" ' + pulse.url + ' " target="_blank">' +
                      '<div class="card__img">' +
                        '<img src="' + pulse.lead_image_url + '" alt="">'+
                      '</div>'+
                      '<div class="card__info">'+
                      '<h3 class="card__title"> ' + pulse.title + ' </h3>'+
                      '<ul class="card__infobar">'+
                        '<li>' + pulse.domain + '</li>'+
                      '</ul>'+
                      '<p class="card__para">' + pulse.excerpt + '</p>'+
                      '</div>'+
                      '</a>'+
                    '</div>'
              $(".highlight-layout .card-wrapper").append(div);
            }

            if (pulses.popular.length > 0) {
              var popular = pulses.popular;
              for (var i = 0; i < popular.length; i++) {
               var pulse = popular[i];
               var li = '<li class="card">'+
                         '<a href=" ' + pulse.url + ' " target="_blank">' +
                         '<div class="card__img">' +
                            '<img src="' + pulse.lead_image_url + '" alt="">'+
                          '</div>'+
                          '<div class="card__info">'+
                          '<h3 class="card__title"> ' + pulse.title + ' </h3>'+
                          '<ul class="card__infobar">'+
                            '<li>' + pulse.domain + '</li>'+
                          '</ul>'+
                          '<p class="card__para">' + pulse.excerpt + '</p>'+
                          '</div>'+
                          '</a>'+
                        '</li>'

                  $(".normal-layout .card-wrapper").append(li);
              }
            }
            if (pulses.all.length > 0) {
              var all = pulses.all;
              for (var i = 0; i < all.length; i++) {
               var pulse = all[i];
               var li = '<li class="card">'+
                         '<a href=" ' + pulse.url + ' " target="_blank">' +
                         '<div class="card__img">' +
                            '<img src="' + pulse.lead_image_url + '" alt="">'+
                          '</div>'+
                          '<div class="card__info">'+
                          '<h3 class="card__title"> ' + pulse.title + ' </h3>'+
                          '<ul class="card__infobar">'+
                            '<li>' + pulse.domain + '</li>'+
                          '</ul>'+
                          '<p class="card__para">' + pulse.excerpt + '</p>'+
                          '</div>'+
                          '</a>'+
                        '</li>'

                $(".dense-layout .card-wrapper").append(li);
              }
            }
          }
        });
    })();
  </script>
</body>
</html>
